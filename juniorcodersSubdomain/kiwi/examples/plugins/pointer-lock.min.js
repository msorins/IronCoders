Kiwi.Plugins.PointerLock={name:"PointerLock",version:"0.1.0",minimumKiwiVersion:"1.0.0"},Kiwi.PluginManager.register(Kiwi.Plugins.PointerLock),Kiwi.Plugins.PointerLock.create=function(a){console.log("Pointer Lock Plugin created in game",a.name)},Kiwi.Plugins.PointerLock.PointerLock=function(a){var b,c;return this.canvas=null,this.locked=!1,this.lockOnClick=!0,this.movementX=0,this.movementY=0,this.trackWhileUnlocked=!0,a.objType&&"Game"===a.objType()?this.canvas=a.stage.container:(this.canvas=a.game.stage.container,a.lockOnClick===!1&&(this.lockOnClick=!1),a.trackWhileUnlocked===!1&&(this.trackWhileUnlocked=!1),"function"==typeof a.runOnLock&&(this.runOnLock=a.runOnLock),"function"==typeof a.runOnUnlock&&(this.runOnUnlock=a.runOnUnlock),"function"==typeof a.runOnLockError&&(this.runOnLockError=a.runOnLockError),"function"==typeof a.runOnMouseMove&&(this.runOnMouseMove=a.runOnMouseMove)),this.lockOnClick&&this.clickGameToLock(),this.canvas.requestPointerLock=this.canvas.requestPointerLock||this.canvas.mozRequestPointerLock||this.canvas.webkitRequestPointerLock,this.canvas.exitPointerLock=this.canvas.exitPointerLock||this.canvas.mozExitPointerLock||this.canvas.webtkitExitPointerLock,_reportMouseMove=this._reportMouseMove.bind(this),document.addEventListener("mousemove",_reportMouseMove,!1),b=this._reportLockError.bind(this),document.addEventListener("pointerlockerror",b,!1),document.addEventListener("mozpointerlockerror",b,!1),document.addEventListener("webkitpointerlockerror",b,!1),c=this._reportLockChange.bind(this),"onpointerlockchange"in document?document.addEventListener("pointerlockchange",c,!1):"onmozpointerlockchange"in document?document.addEventListener("mozpointerlockchange",c,!1):"onwebkitpointerlockchange"in document&&document.addEventListener("webkitpointerlockchange",c,!1),this},Kiwi.Plugins.PointerLock.PointerLock.prototype._reportLockChange=function(){this.getPointerLockElement()===this.canvas?(this.locked=!0,this.runOnLock()):(this.locked=!1,this.lockOnClick&&this.clickGameToLock(),this.runOnUnlock())},Kiwi.Plugins.PointerLock.PointerLock.prototype._reportLockError=function(){console.warn("Pointer lock change failed"),this.runOnLockError()},Kiwi.Plugins.PointerLock.PointerLock.prototype._reportMouseMove=function(a){(this.locked||this.trackWhileUnlocked)&&(this.movementX=a.movementX||a.mozMovementX||a.webkitMovementX||0,this.movementY=a.movementY||a.mozMovementY||a.webkitMovementY||0,this.runOnMouseMove())},Kiwi.Plugins.PointerLock.PointerLock.prototype.clickGameToLock=function(){this.canvas.onclick=function(){this.enablePointerLock(),this.canvas.onclick=function(){}}.bind(this)},Kiwi.Plugins.PointerLock.PointerLock.prototype.disablePointerLock=function(){this.canvas===this.getPointerLockElement()?this.canvas.exitPointerLock():console.warn("Pointer unlock failed: element not locked")},Kiwi.Plugins.PointerLock.PointerLock.prototype.enablePointerLock=function(){var a=this.getPointerLockElement();return a===this.canvas&&console.warn("Pointer lock failed: already locked on target element"),null!=a?void console.warn("Pointer lock failed: already locked on element",a):void this.canvas.requestPointerLock()},Kiwi.Plugins.PointerLock.PointerLock.prototype.getPointerLockElement=function(){return document.pointerLockElement||document.mozPointerLockElement||document.webkitPointerLockElement},Kiwi.Plugins.PointerLock.PointerLock.prototype.objType=function(){return"PointerLock"},Kiwi.Plugins.PointerLock.PointerLock.prototype.runOnLock=function(){},Kiwi.Plugins.PointerLock.PointerLock.prototype.runOnLockError=function(){},Kiwi.Plugins.PointerLock.PointerLock.prototype.runOnMouseMove=function(){},Kiwi.Plugins.PointerLock.PointerLock.prototype.runOnUnlock=function(){};